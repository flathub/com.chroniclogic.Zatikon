id: com.chroniclogic.Zatikon
runtime: org.freedesktop.Platform
runtime-version: '22.08'
sdk: org.freedesktop.Sdk
sdk-extensions:
- org.freedesktop.Sdk.Extension.openjdk17
command: zatikon

finish-args:
- --env=PATH=/app/jre/bin:/usr/bin:/app/bin
- --env=JAVA_HOME=/app/jre
- --device=dri
- --share=ipc
- --share=network
- --socket=x11
- --socket=pulseaudio
- --filesystem=xdg-data/zatikon

modules:
- name: OpenJDK17
  build-commands:
  - /usr/lib/sdk/openjdk17/install.sh
  buildsystem: simple

- name: zatikon
  build-commands:
  - install -D zatikon.sh /app/bin/zatikon
  - install -D zatikon.jar /app/bin/zatikon.jar
  - install -Dm644 com.chroniclogic.Zatikon.desktop /app/share/applications/com.chroniclogic.Zatikon.desktop
  - install -Dm644 zatikon128.png ${FLATPAK_DEST}/share/icons/hicolor/128x128/apps/com.chroniclogic.Zatikon.png
  - install -Dm644 zatikon64.png ${FLATPAK_DEST}/share/icons/hicolor/64x64/apps/com.chroniclogic.Zatikon.png
  buildsystem: simple
  sources:
  - url: https://github.com/zatikon/zatikon-flathub/releases/download/v1.0.99/zatikon-1.0.99.jar
    type: file
    dest-filename: zatikon.jar
    sha256: 1b4dd060bd6cad685dd48f807af59ebd6477bcae944b5ccdf292290fc8fb8115
  - path: zatikon.sh
    type: file
  - path: com.chroniclogic.Zatikon.desktop
    type: file
  - path: zatikon128.png
    type: file
  - path: zatikon64.png
    type: file
